# ===================================
# ðŸš€ FUNÃ‡Ã•ES LAMBDA - CONFIGURAÃ‡ÃƒO ÃšNICA
# ===================================

# FunÃ§Ã£o Ãºnica que lida com todas as rotas
nestRolesApi:
    handler: dist/main.handler
    memorySize: 512
    timeout: 30
    environment:
        NODE_ENV: ${sls:stage}
    events:
        # Captura TODAS as rotas com mÃ©todo ANY
        - http:
              path: /{proxy+}
              method: ANY
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false
        # Captura a rota raiz tambÃ©m
        - http:
              path: /
              method: ANY
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false
